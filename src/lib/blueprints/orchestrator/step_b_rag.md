# Step B: RAG 검증 및 정보 강화

## 목표
A단계에서 생성된 초안 카드들을 최신 정보로 검증하고 보강합니다.

## 주요 작업
1. **URL 유효성 검증**: 언급된 링크들이 실제로 작동하는지 확인
2. **최신 정보 주입**: Tavily RAG로 수집한 최신 정보 반영
3. **도구 정보 업데이트**: 추천 도구들의 최신 상태 확인
4. **사실 검증**: 잘못된 정보나 과시된 기능 수정

## RAG 정보 활용 방식

### 📊 최신 동향 정보 반영
```
사용자 요청: "이메일 자동 분류"
RAG 결과: Gmail API 최신 업데이트, 새로운 필터링 옵션
→ 플로우에 최신 기능 반영
```

### 🛠️ 도구별 정보 업데이트
```
초안 도구: "Zapier"
RAG 결과: Zapier 새로운 앱 연동, 가격 정책 변경
→ 대안 도구 추가, 정확한 정보 반영
```

### 🔗 링크 검증 및 교체
```
초안 링크: 과거/깨진 링크
RAG 검색: 최신 공식 문서 링크
→ 유효한 링크로 교체
```

## 검증 프로세스

### 1. 도구 검증
- 언급된 모든 도구에 대해 RAG 검색
- 최신 가격, 기능, 사용법 확인
- 대안 도구 추가 검토

### 2. 링크 검증  
- 모든 URL에 대해 HTTP 상태 확인
- 깨진 링크는 RAG로 대체 링크 검색
- 공식 문서 우선 사용

### 3. 정보 정확성 검증
- 기술적 내용의 최신성 확인
- API 변경사항 반영
- 정책/가격 변경사항 업데이트

## 출력 형식
A단계와 동일한 JSON 구조를 유지하되, 다음 항목들이 보강됩니다:

```json
{
  "cards": [
    {
      "type": "flow",
      "title": "🚀 검증된 자동화 플로우",
      "steps": [
        {
          "id": "1",
          "title": "업데이트된 단계명",
          "tool": "검증된 도구명",
          "officialUrl": "https://검증된-공식-링크",
          "alternativeTools": ["대안1", "대안2"],
          "lastVerified": "2024-07-31"
        }
      ],
      "status": "rag_verified",
      "ragSources": [
        {
          "url": "https://source1.com",
          "title": "참고 자료 제목", 
          "relevance": "high"
        }
      ]
    }
  ],
  "ragMetadata": {
    "searchesPerformed": 5,
    "sourcesFound": 12,
    "linksVerified": 8,
    "updatesApplied": 3
  }
}
```

## 중요 원칙
- **정확성 우선**: 불확실한 정보는 제거하거나 "확인 필요" 표시
- **최신성 보장**: 2024년 이후 정보 우선 사용
- **공식 소스 우선**: 공식 문서 > 신뢰할 만한 블로그 > 기타
- **속도 고려**: RAG 검색은 핵심 항목에만 집중 (3-5개)

## 실패 처리
- RAG API 오류 시: 기존 초안 유지 + 경고 로그
- 링크 검증 실패 시: 링크 제거 또는 대체
- 도구 정보 없음 시: "확인 필요" 표시